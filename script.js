// Curated collection of iconic Kanye West lyrics
const lyricsDatabase = [
    {
        text: "God show me the way because the Devil's tryna break me down",
        song: "Jesus Walks",
        album: "The College Dropout",
        year: "2004"
    },
    {
        text: "I wanna talk to God but I'm afraid 'cause we ain't spoke in so long",
        song: "Jesus Walks",
        album: "The College Dropout",
        year: "2004"
    },
    {
        text: "You know what the Midwest is? Young and restless",
        song: "Jesus Walks",
        album: "The College Dropout",
        year: "2004"
    },
    {
        text: "My mama used to say only Jesus can save us",
        song: "Jesus Walks",
        album: "The College Dropout",
        year: "2004"
    },
    {
        text: "God is King, we the soldiers",
        song: "Ultrabeam",
        album: "Jesus Is King",
        year: "2019"
    },
    {
        text: "When I get to Heaven's gates, I ain't gotta peek over",
        song: "Ultrabeam",
        album: "Jesus Is King",
        year: "2019"
    },
    {
        text: "I ain't mean, I'm just focused",
        song: "Ultrabeam",
        album: "Jesus Is King",
        year: "2019"
    },
    {
        text: "Before the flood, people judge, they did the same thing to Noah",
        song: "Ultrabeam",
        album: "Jesus Is King",
        year: "2019"
    },
    {
        text: "They say the week start on Monday, but the strong start on Sunday",
        song: "Ultrabeam",
        album: "Jesus Is King",
        year: "2019"
    },
    {
        text: "Won't be in bondage to any man",
        song: "Ultrabeam",
        album: "Jesus Is King",
        year: "2019"
    },
    {
        text: "We the descendants of Abraham, Ye should be made free",
        song: "Ultrabeam",
        album: "Jesus Is King",
        year: "2019"
    },
    {
        text: "To whom the son set free is free indeed",
        song: "Ultrabeam",
        album: "Jesus Is King",
        year: "2019"
    },
    {
        text: "If you woke, then wake up",
        song: "Ultrabeam",
        album: "Jesus Is King",
        year: "2019"
    },
    {
        text: "With Judas, kiss and make up",
        song: "Ultrabeam",
        album: "Jesus Is King",
        year: "2019"
    },
    {
        text: "Even with the bitter cup, forgave my brothers and drank up",
        song: "Ultrabeam",
        album: "Jesus Is King",
        year: "2019"
    },
    {
        text: "Did everything but gave up",
        song: "Ultrabeam",
        album: "Jesus Is King",
        year: "2019"
    },
    {
        text: "Stab my back, I can't front, still we win, we prayed up",
        song: "Ultrabeam",
        album: "Jesus Is King",
        year: "2019"
    },
    {
        text: "Even when we die, we raise up",
        song: "Ultrabeam",
        album: "Jesus Is King",
        year: "2019"
    },
    {
        text: "Ain't no wantin', no, we need it",
        song: "Ultrabeam",
        album: "Jesus Is King",
        year: "2019"
    },
    {
        text: "The powers that be done been greedy",
        song: "Ultrabeam",
        album: "Jesus Is King",
        year: "2019"
    },
    {
        text: "We need ours by this evening",
        song: "Ultrabeam",
        album: "Jesus Is King",
        year: "2019"
    },
    {
        text: "No white flag or no treaty",
        song: "Ultrabeam",
        album: "Jesus Is King",
        year: "2019"
    },
    {
        text: "We got the product, we got the tools",
        song: "Ultrabeam",
        album: "Jesus Is King",
        year: "2019"
    },
    {
        text: "We got the minds, we got the youth",
        song: "Ultrabeam",
        album: "Jesus Is King",
        year: "2019"
    },
    {
        text: "We goin' wild, we on the loose",
        song: "Ultrabeam",
        album: "Jesus Is King",
        year: "2019"
    },
    {
        text: "People is lying, we are the truth",
        song: "Ultrabeam",
        album: "Jesus Is King",
        year: "2019"
    },
    {
        text: "Everything old shall now become new",
        song: "Ultrabeam",
        album: "Jesus Is King",
        year: "2019"
    },
    {
        text: "The leaves'll be green, bearing the fruit",
        song: "Ultrabeam",
        album: "Jesus Is King",
        year: "2019"
    },
    {
        text: "Love God and our neighbor, as written in Luke",
        song: "Ultrabeam",
        album: "Jesus Is King",
        year: "2019"
    },
    {
        text: "The army of God and we are the truth",
        song: "Ultrabeam",
        album: "Jesus Is King",
        year: "2019"
    },
    {
        text: "Father, I stretch, stretch my hands to You",
        song: "Father Stretch My Hands Pt. 1",
        album: "The Life of Pablo",
        year: "2016"
    },
    {
        text: "Lifelike, this is what your life like, try to live your life right",
        song: "Father Stretch My Hands Pt. 1",
        album: "The Life of Pablo",
        year: "2016"
    },
    {
        text: "People really know you, push your buttons like typewrite",
        song: "Father Stretch My Hands Pt. 1",
        album: "The Life of Pablo",
        year: "2016"
    },
    {
        text: "This is like a movie, but it's really very lifelike",
        song: "Father Stretch My Hands Pt. 1",
        album: "The Life of Pablo",
        year: "2016"
    },
    {
        text: "Make no mistake, girl, still love you",
        song: "Make No Mistake",
        album: "Jesus Is King",
        year: "2019"
    },
    {
        text: "Believe it or not, the Lord still shines on you",
        song: "Make No Mistake",
        album: "Jesus Is King",
        year: "2019"
    },
    {
        text: "Some day, some day, I wanna wear a starry crown",
        song: "Some Day",
        album: "Jesus Is King",
        year: "2019"
    },
    {
        text: "Some day, some day, some day, I wanna lay down, like God did, on Sunday",
        song: "Some Day",
        album: "Jesus Is King",
        year: "2019"
    },
    {
        text: "Some days, not gonna please everybody",
        song: "Some Day",
        album: "Jesus Is King",
        year: "2019"
    },
    {
        text: "Some days I wanna hit the red dot on everybody",
        song: "Some Day",
        album: "Jesus Is King",
        year: "2019"
    },
    {
        text: "I've been tryin' to make you love me, but everything I try just takes you further from me",
        song: "Some Day",
        album: "Jesus Is King",
        year: "2019"
    },
    {
        text: "Some day we gon' set it off, some day we gon' get this off",
        song: "Some Day",
        album: "Jesus Is King",
        year: "2019"
    },
    {
        text: "Baby, don't you bet it all on a pack of Fentanyl",
        song: "Some Day",
        album: "Jesus Is King",
        year: "2019"
    },
    {
        text: "You might think they wrote you off, they gon' have to rope me off",
        song: "Some Day",
        album: "Jesus Is King",
        year: "2019"
    },
    {
        text: "Someday the drama'll be gone and they'll play this song on and on",
        song: "Some Day",
        album: "Jesus Is King",
        year: "2019"
    },
    {
        text: "Sometimes I take all the shine, talk like I drank all the wine",
        song: "Some Day",
        album: "Jesus Is King",
        year: "2019"
    },
    {
        text: "Sing every hour, every minute, every second, sing each and every millisecond",
        song: "Sing Til The Power",
        album: "Jesus Is King",
        year: "2019"
    },
    {
        text: "We need you, we need you, oh, we need you",
        song: "Sing Til The Power",
        album: "Jesus Is King",
        year: "2019"
    },
    {
        text: "Sing 'til the power of the Lord comes down",
        song: "Sing Til The Power",
        album: "Jesus Is King",
        year: "2019"
    },
    {
        text: "Let everything that have breath praise God",
        song: "Sing Til The Power",
        album: "Jesus Is King",
        year: "2019"
    },
    {
        text: "When we sing the glory of the Lord comes down",
        song: "Sing Til The Power",
        album: "Jesus Is King",
        year: "2019"
    },
    {
        text: "Praising the Lord, praise God in the sanctuary",
        song: "Sing Til The Power",
        album: "Jesus Is King",
        year: "2019"
    },
    {
        text: "For His mighty works and excellent grace and His mighty power",
        song: "Sing Til The Power",
        album: "Jesus Is King",
        year: "2019"
    },
    {
        text: "Hallelujah, hallelujah, hallelujah, hallelujah",
        song: "Hallelujah",
        album: "Jesus Is King",
        year: "2019"
    },
    {
        text: "Hallelujah, He is wonderful",
        song: "Hallelujah",
        album: "Jesus Is King",
        year: "2019"
    }
];

// Global variables
let currentLyricIndex = 0;
let favorites = JSON.parse(localStorage.getItem('yeezyFavorites')) || [];
let usedIndices = new Set();

// DOM elements
const lyricText = document.getElementById('lyricText');
const songTitle = document.getElementById('songTitle');
const albumYear = document.getElementById('albumYear');
const lyricCard = document.getElementById('lyricCard');
const randomBtn = document.getElementById('randomBtn');
const nextBtn = document.getElementById('nextBtn');
const favoriteBtn = document.getElementById('favoriteBtn');
const favoriteText = document.getElementById('favoriteText');
const favoritesSection = document.getElementById('favoritesSection');
const favoritesList = document.getElementById('favoritesList');
const clearFavoritesBtn = document.getElementById('clearFavoritesBtn');

// Initialize the app
document.addEventListener('DOMContentLoaded', function() {
    updateFavoritesDisplay();
    showRandomLyric();
    
    // Event listeners
    randomBtn.addEventListener('click', showRandomLyric);
    nextBtn.addEventListener('click', showNextLyric);
    favoriteBtn.addEventListener('click', toggleFavorite);
    clearFavoritesBtn.addEventListener('click', clearFavorites);
    
    // Keyboard shortcuts
    document.addEventListener('keydown', function(e) {
        if (e.code === 'Space' && e.target.tagName !== 'INPUT') {
            e.preventDefault();
            showRandomLyric();
        } else if (e.code === 'ArrowRight') {
            e.preventDefault();
            showNextLyric();
        } else if (e.code === 'KeyF') {
            e.preventDefault();
            toggleFavorite();
        }
    });
});

// Show a random lyric
function showRandomLyric() {
    // Reset used indices if we've used all lyrics
    if (usedIndices.size >= lyricsDatabase.length) {
        usedIndices.clear();
    }
    
    let randomIndex;
    do {
        randomIndex = Math.floor(Math.random() * lyricsDatabase.length);
    } while (usedIndices.has(randomIndex));
    
    usedIndices.add(randomIndex);
    currentLyricIndex = randomIndex;
    displayLyric(lyricsDatabase[currentLyricIndex]);
}

// Show the next lyric in sequence
function showNextLyric() {
    currentLyricIndex = (currentLyricIndex + 1) % lyricsDatabase.length;
    displayLyric(lyricsDatabase[currentLyricIndex]);
}

// Display a lyric with animation
function displayLyric(lyric) {
    // Add loading state
    lyricText.innerHTML = '<div class="loading"></div>';
    lyricCard.classList.remove('animate');
    
    // Simulate loading delay for better UX
    setTimeout(() => {
        lyricText.textContent = lyric.text;
        songTitle.textContent = lyric.song;
        albumYear.textContent = `${lyric.album} (${lyric.year})`;
        
        // Add animation
        lyricCard.classList.add('animate');
        
        // Update favorite button state
        updateFavoriteButton();
    }, 300);
}

// Toggle favorite status
function toggleFavorite() {
    const currentLyric = lyricsDatabase[currentLyricIndex];
    const lyricId = `${currentLyric.song}-${currentLyricIndex}`;
    
    const existingIndex = favorites.findIndex(fav => fav.id === lyricId);
    
    if (existingIndex > -1) {
        // Remove from favorites
        favorites.splice(existingIndex, 1);
    } else {
        // Add to favorites
        favorites.push({
            id: lyricId,
            text: currentLyric.text,
            song: currentLyric.song,
            album: currentLyric.album,
            year: currentLyric.year
        });
    }
    
    // Save to localStorage
    localStorage.setItem('yeezyFavorites', JSON.stringify(favorites));
    
    // Update UI
    updateFavoriteButton();
    updateFavoritesDisplay();
}

// Update favorite button appearance
function updateFavoriteButton() {
    const currentLyric = lyricsDatabase[currentLyricIndex];
    const lyricId = `${currentLyric.song}-${currentLyricIndex}`;
    const isFavorited = favorites.some(fav => fav.id === lyricId);
    
    if (isFavorited) {
        favoriteBtn.classList.add('favorited');
        favoriteText.textContent = 'Remove from Favorites';
    } else {
        favoriteBtn.classList.remove('favorited');
        favoriteText.textContent = 'Add to Favorites';
    }
}

// Update favorites display
function updateFavoritesDisplay() {
    if (favorites.length === 0) {
        favoritesSection.style.display = 'none';
        return;
    }
    
    favoritesSection.style.display = 'block';
    favoritesList.innerHTML = '';
    
    favorites.forEach(favorite => {
        const favoriteItem = document.createElement('div');
        favoriteItem.className = 'favorite-item';
        favoriteItem.innerHTML = `
            <div class="favorite-text">${favorite.text}</div>
            <div class="favorite-meta">${favorite.song} - ${favorite.album} (${favorite.year})</div>
        `;
        
        // Add click to display this lyric
        favoriteItem.addEventListener('click', () => {
            const lyricIndex = lyricsDatabase.findIndex(lyric => 
                lyric.text === favorite.text && lyric.song === favorite.song
            );
            if (lyricIndex > -1) {
                currentLyricIndex = lyricIndex;
                displayLyric(lyricsDatabase[currentLyricIndex]);
                updateFavoriteButton();
            }
        });
        
        favoritesList.appendChild(favoriteItem);
    });
}

// Clear all favorites
function clearFavorites() {
    if (confirm('Are you sure you want to clear all favorites?')) {
        favorites = [];
        localStorage.setItem('yeezyFavorites', JSON.stringify(favorites));
        updateFavoritesDisplay();
        updateFavoriteButton();
    }
}

// Add some fun easter eggs
let clickCount = 0;
document.querySelector('.title').addEventListener('click', function() {
    clickCount++;
    if (clickCount === 5) {
        alert('🌊 Yeezy taught me well! 🌊');
        clickCount = 0;
    }
});

// Add smooth scrolling for better UX
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
        e.preventDefault();
        document.querySelector(this.getAttribute('href')).scrollIntoView({
            behavior: 'smooth'
        });
    });
});
